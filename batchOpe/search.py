"""
@Author  : liuyang
@Time    : 2024/1/25 04:14
@Content : 
"""
import jsonpath
import requests
import json

orderlist_kzj = [2024012410097496169,
2024012410097372739,
2024012410097496102,
2024012410097469474,
2024012410097372566,
2024012410097495937,
2024012410097372519,
2024012410097372503,
2024012410097372499,
2024012410097495869,
2024012410097419007,
2024012410097495865,
2024012410097372488,
2024012410097372485,
2024012410097469361,
2024012410097469355,
2024012410097372477,
2024012410097418977,
2024012410097469330,
2024012410097418960,
2024012410097372424,
2024012410097495778,
2024012410097372377,
2024012410097469228,
2024012410097418868,
2024012410097495706,
2024012410097372329,
2024012410097372327,
2024012410097469209,
2024012410097469199,
2024012410097495687,
2024012410097418830,
2024012410097418817,
2024012410097372250,
2024012410097495616,
2024012410097418764,
2024012410097372223,
2024012410097418756,
2024012410097372202,
2024012410097469084,
2024012410097418735,
2024012410097372199,
2024012410097495578,
2024012410097469061,
2024012410097418709,
2024012410097418700,
2024012410097469049,
2024012410097418694,
2024012410097372143,
2024012410097469024,
2024012410097495480,
2024012410097418608,
2024012410097418556,
2024012410097495401,
2024012410097418554,
2024012410097495393,
2024012410097495390,
2024012410097495389,
2024012410097372005,
2024012410097371969,
2024012410097468854,
2024012410097418495,
2024012410097371947,
2024012410097495326,
2024012410097495318,
2024012410097495301,
2024012410097371922,
2024012410097418466,
2024012410097468819,
2024012410097468820,
2024012410097418451,
2024012410097418438,
2024012410097418435,
2024012410097418424,
2024012410097371873,
2024012410097371857,
2024012410097495215,
2024012410097418364,
2024012410097418361,
2024012410097418345,
2024012410097495159,
2024012410097371774,
2024012410097468679,
2024012410097371759,
2024012410097495128,
2024012410097418295,
2024012410097495122,
2024012410097468645,
2024012410097371744,
2024012410097495104,
2024012410097371730,
2024012410097468625,
2024012410097371707,
2024012410097418244,
2024012410097495066,
2024012410097418235,
2024012410097371682,
2024012410097371625,
2024012410097468521,
2024012410097468516,
2024012410097468508,
2024012410097494989,
2024012410097494985,
2024012410097371602,
2024012410097468493,
2024012410097494959,
2024012410097418127,
2024012410097494943,
2024012410097494927,
2024012410097418108,
2024012410097418088,
2024012410097494909,
2024012410097371536,
2024012410097371534,
2024012410097371527,
2024012410097494891,
2024012410097494885,
2024012410097494863,
2024012410097418038,
2024012410097418006,
2024012410097371442,
2024012410097371431,
2024012410097468318,
2024012410097417954,
2024012410097494780,
2024012410097494775,
2024012410097417950,
2024012410097494774,
2024012410097494757,
2024012410097468284,
2024012410097494752,
2024012410097371382,
2024012410097468279,
2024012410097468280,
2024012410097468270,
2024012410097371370,
2024012410097494730,
2024012410097417909,
2024012410097468251,
2024012410097417900,
2024012410097494715,
2024012410097494708,
2024012410097417877,
2024012410097371321,
2024012410097417874,
2024012410097371315,
2024012410097494677,
2024012410097417869,
2024012410097494667,
2024012410097417857,
2024012410097371301,
2024012410097371298,
2024012410097371296,
2024012410097468177,
2024012410097371270,
2024012410097494630,
2024012410097417800,
2024012410097468149,
2024012410097494601,
2024012410097494599,
2024012410097417786,
2024012410097417729,
2024012410097494530,
2024012410097494526,
2024012410097417716,
2024012410097371169,
2024012410097468073,
2024012410097494512,
2024012410097468069,
2024012410097371154,
2024012410097494506,
2024012410097468060,
2024012410097371144,
2024012410097468055,
2024012410097494497,
2024012410097494496,
2024012410097494485,
2024012410097468041,
2024012410097371123,
2024012410097417684,
2024012410097371121,
2024012410097371118,
2024012410097371114,
2024012410097468029,
2024012410097494473,
2024012410097468026,
2024012410097468021,
2024012410097494464,
2024012410097417668,
2024012410097417659,
2024012410097371086,
2024012410097494441,
2024012410097371078,
2024012410097371073,
2024012410097467985,
2024012410097417636,
2024012410097371049,
2024012410097494375,
2024012410097494373]

def searchList(orderNo):
    url = "https://api-intranet.youpin898.com/api/youpin/admin/work-order/agency/list"

    payload = json.dumps({
      "orderNo": str(orderNo),
      "pageNumber": 1,
      "pageSize": 10
    })
    headers = {
      'authority': 'api-intranet.youpin898.com',
      'accept': 'application/json, text/plain, */*',
      'accept-language': 'zh-CN,zh;q=0.9',
      'apptype': '1',
      'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI4NTY1YjRiYmFjMGE0NGY2OWFlMDU2YWIwMWRlNjY0NiIsIm5hbWVpZCI6IjM1OCIsIklkIjoiMzU4IiwidW5pcXVlX25hbWUiOiJsaXV5YW5nIiwiTmFtZSI6ImxpdXlhbmciLCJuYmYiOjE3MDYxMjY2NDQsImV4cCI6MTczNzIzMDY0NCwiaXNzIjoiYWRtaW4ueW91cGluODk4LmNvbSIsImF1ZCI6ImFkbWluIn0.s_T0HvyoKd5wq2Cqtn4DzxVeMyuRFf3tCoK0_CralIA',
      'cache-control': 'no-cache',
      'content-type': 'application/json',
      'origin': 'https://uuadmin.youpin898.com',
      'pragma': 'no-cache',
      'referer': 'https://uuadmin.youpin898.com/',
      'sec-ch-ua': '"Not_A Brand";v="8", "Chromium";v="120", "Google Chrome";v="120"',
      'sec-ch-ua-mobile': '?0',
      'sec-ch-ua-platform': '"macOS"',
      'sec-fetch-dest': 'empty',
      'sec-fetch-mode': 'cors',
      'sec-fetch-site': 'same-site',
      'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36'
    }

    response = requests.request("POST", url, headers=headers, data=payload)
    responsejson = response.json()
    workOrderId = jsonpath.jsonpath(responsejson,"$..workOrderId")
    workOrderId = json.dumps(workOrderId)
    print(workOrderId)
    with open("/Volumes/yaangmac/mypthonfiles/batchOpe/searchlist_kzj","a") as timesfile:
        timesfile.write(str(orderNo)+":")
        timesfile.write(workOrderId+"\n")



# searchList(2024012410097417545)

for order in  orderlist_kzj:
    searchList(order)
print("done")
